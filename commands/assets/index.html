<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Burnth / WormCash</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="reset.css">
    <link rel="stylesheet" href="style.css">
    <script src=" https://cdn.jsdelivr.net/npm/web3@4.6.0/dist/web3.min.js "></script>
</head>

<body>
    <div id="content-burn">
        <img id="logo" src="burn.png" />
        <div style="text-align: center;">
            <input id="burn-amnt" type="text" placeholder="How much ETH?">
            <br>
            <button id="burn-btn">ðŸ”¥ BURN MY ETH ðŸ”¥</button>
        </div>
    </div>
    <div id="separator"></div>
    <div id="content-mint">
        <img id="logo" src="mint.png" />
        <div style="text-align: center;">
            <input id="mint-amnt" type="text" placeholder="How much ETH?">
            <br>
            <button id="mint-btn">ðŸ‘¶ MINT MY BURNTH ðŸ‘¶</button>
        </div>
    </div>
    <script>
        document.getElementById("burn-btn").onclick = function () {
            fetch("/burn")
                .then((response) => response.json())
                .then((resp) => {
                    let amount = Web3.utils.toHex(BigInt(Web3.utils.toWei(document.getElementById("burn-amnt").value, "ether")));
                    alert(amount);
                    ethereum
                        .request({ method: "eth_requestAccounts" })
                        .then((accounts) => {
                            const sender = accounts[0];
                            ethereum
                                .request({
                                    method: "eth_sendTransaction",
                                    params: [
                                        {
                                            from: sender,
                                            to: resp['burn_address'],
                                            value: amount
                                        },
                                    ],
                                })
                                .then((txHash) => console.log(txHash))
                                .catch((error) => console.error(error));
                        })
                });


        }
    </script>
</body>

</html>